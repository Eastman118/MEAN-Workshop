<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Day 1 - Node.js</title>

  <meta name="description" content="Welcome to the M.E.A.N. Workshop">
  <meta name="author" content="Arvind Ravulavaru">

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link rel="stylesheet" href="css/reveal.min.css">
  <link rel="stylesheet" href="css/theme/serif.css" id="theme">

  <!-- For syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- If the query includes 'print-pdf', include the PDF print sheet -->
  <script>
  if (window.location.search.match(/print-pdf/gi)) {
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = 'css/print/pdf.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  }
  </script>

  <!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->

  <base target="_blank">
</head>

<body>

  <div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
      <section>
        <h1 style="width:107%;">Day 1 - Node.js</h1>
        <br/>
        <br/>
        <h3>Javascript on Server</h3>
        <br/>
        <br/>
        <h3>
          <small><a href="http://mean-workshop.herokuapp.com/">Workshop Home Page</a>
          </small>
        </h3>
      </section>

      <section>
        <h2>Setup</h2>
        <hr/>
        <a href="http://nodejs.org/">Install Node.js</a>
        <br/>
        <br/>
        <a href="http://git-scm.com/downloads/">Gitbash</a>
        <br/>
        <small>[Optional](Windows only)</small>
      </section>

      <section>
        <h2>Verify Setup</h2>
        <hr/>
        <br/>
        <h4>Node</h4>
        <pre><code>$ node -v</code></pre>
        <br/>
        <h4>NPM</h4>
        <pre><code>$ npm -v</code></pre>
      </section>


      <section>
        <h2>Node R.E.P.L.</h2>
        <hr/>
        <br/>
        <pre><code>$ node
        > var a = 3, b = 3, c = 3; //undefined
        > a + b + c //9</code></pre>
      </section>

      <section>
        <h2>What is Node.js?</h2>
        <hr/>
        <h4>It's Javascript on the server</h4>
      </section>

      <section>
        <h2>Node.js</h2>
        <hr/>
        <br/>
        <ul>
          <li>
            <h4>A JavaScript runtime environment running Google Chrome’s V8 engine
            </h4>
          </li>
          <li>
            <h4>Designed for high concurrency
            </h4>
          </li>
          <li>
            <h4>Evented, Non Blocking I/O</h4>
          </li>
          <li>
            <h4>CommonJs module system</h4>
          </li>
        </ul>
      </section>

      <section style="width:106%;">
        <h2>Sync vs. Async</h2>
        <hr/>
        <br/>
        <h4>1 Egg takes 15 mins to boil</h4>
        <br/>
        <h4>10 Eggs take 15 mins
          <em>(20 mins practically)</em> and not 150 mins!!</h4>
        <br/>
        <hr/>
        <h3>Achieved using Non-blocking code</h3>
      </section>
      <section>
        <h2>Apache vs Nginx</h2>
        <hr/>
        <img src="imgs/nginx-apache-reqs-sec-451x216.png" width="700">
      </section>

      <section>
        <h3>
          <em>“Apache uses one thread per connection, where as NGINX uses an event loop.”</em>
        </h3>
        <hr/>
        <h2>Event Loops</h2>
      </section>

      <section>
        <img src="imgs/2.png" width="800">
      </section>

      <section>
        <h2>Blocking vs Non-Blocking</h2>
        <hr/>
        <h4>Blocking Code</h4>
        <pre><code>  var contents = readFile('/path/some/file.txt');
  console.log(contents);
  console.log('Another independent operation');</code></pre>

        <h4>Non-Blocking Code</h4>
        <pre><code>  var contents = readFile('/path/some/file.txt', function(err, contents){
        	console.log(err || contents);
        });

  console.log('Another independent operation');</code></pre>
      </section>

      <section>
        <h2>Blocking vs Non-Blocking</h2>
        <hr/>
        <pre><code>var callback = function(err, contents) {
        console.log(contents);
};

  readFile('/path/some/file1.txt', callback);
  readFile('/path/some/file2.txt', callback);</code></pre>
        <img src="imgs/1.png" width="800">
      </section>
      <section>
        <h2>Hands On</h2>
      </section>

      <section>
        <h2>01.Setup Node project</h2>
        <hr/>
        <pre><code>$ npm init</code></pre>
        <code>Package.json</code>
        <pre><code>{
  "name": "HandsonTutorial",
  "version": "0.1.0",
  "description": "A Node project",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "Arvind Ravulavaru",
  "license": "MIT"
}
</code></pre>
      </section>
      <section>
        <h2>02.Hello Node
          <small>Cont...</small>
        </h2>
        <hr/>
        <code>index.js</code>
        <pre><code>console.log('Hello Node!!');</code></pre>
        <h4>Run</h4>
        <pre><code>$ node index.js
Hello Node!!</code></pre>

      </section>
      <section>
        <h2>03.NPM Scripts
          <small>Cont...</small>
        </h2>
        <hr/>
        <code>Package.json</code>
        <pre><code>{
  "name": "HandsonTutorial",
  "version": "0.1.0",
  "description": "A Node project",
  "main": "index.js",
  "scripts": {
    "start" : "node index.js",
    "test"  : "echo \"Error: no test specified\" && exit 1"
  },
  "author": "Arvind Ravulavaru",
  "license": "MIT"
}
</code></pre> 
        <h4>Run</h4><pre><code>$ npm start</code></pre>
      </section>
      <section>
        <h2>04.Simple Functions
          <small>Cont...</small>
        </h2>
        <hr/>
        <code>index.js</code>
        <pre><code>function greet(what) {
  console.log('Hello', what);
}

greet('Node');
greet('NPM');</code></pre>
        <h4>Run</h4>
        <pre><code>$ node index.js
Hello Node
Hello NPM</code></pre>

      </section>
      <section>
        <h2>05.Require Modules
          <small>Cont...</small>
        </h2>
        <hr/>
        <code>index.js</code>
        <pre><code>var util = require('util');

function greet(what) {
  util.print('Hello '+ what+'\n');
}

greet('Node');
greet('NPM');
</code></pre>
        <h4>Run</h4>
        <pre><code>$ node index.js
Hello Node
Hello NPM</code></pre>
      </section>
      <section>
        <h3>06.Require Local Modules
          <small>Cont...</small>
        </h3>
        <hr/>
        <code>index.js</code>
        <pre><code>var greet = require('./greet');

greet('Node');
greet('NPM');
</code></pre>
        <code>greet.js</code>
        <pre><code>var util = require('util');
module.exports = function(what) {
  util.print('Hello ' + what + '\n');
}
</code></pre>
        <h4>Run</h4>
        <pre><code>$ node index.js
Hello Node
Hello NPM</code></pre>
      </section>
      <section>
        <h2>07.HTTP Server
        </h2>
        <hr/>
        <code>index.js</code><pre><code>var http = require("http"),
  port = 1881;

var server = http.createServer(function(request, response) {
  response.writeHeader(200, {
    "Content-Type": "text/plain"
  });
  response.write("Hello HTTP!");
  response.end();
});

server.listen(port);
console.log("Server Running on " + port + ".\nLaunch http://localhost:" + port);</code></pre>
        <h4>Run</h4>
        <pre><code>$ node index.js</code></pre>

        <code>http://localhost:1881</code>
      </section>
      <section>
        <h2>08.TCP Server
        </h2>
        <hr/>
        <code>index.js</code><pre><code>var net = require('net'),
  users = [],
  port = 2772;

net.createServer(function(socket) {
  socket.userid = socket.remoteAddress + ":" + socket.remotePort;
  users.push(socket);
  socket.write("Hello " + socket.userid + "\n");
  broadcast(socket.userid + " joined the chat\n", socket);

  socket.on('data', function(data) {
    broadcast(socket.userid + "> " + data, socket);
  });

  socket.on('end', function() {
    users.splice(users.indexOf(socket), 1);
    broadcast(socket.userid + " left the chat.\n");
  });

  function broadcast(message, sender) {
    users.forEach(function(user) {
      if (user === sender) return;
      user.write(message);
    });
    process.stdout.write(message)
  }

}).listen(port);

console.log("Chat server running at port " + port + "\n");</code></pre>
        <pre><code>$ node index.js</code></pre>
        <code>curl http://localhost:2772</code>
      </section>

      <section>
        <h2>09.File Upload
        </h2>
        <hr/>
        <pre><code>$ npm install formidable</code></pre>
        <pre><code>var formidable = require('formidable'),
    http = require('http'),
    util = require('util'),
    port = 3663;

http.createServer(function(req, res) {
  if (req.url == '/upload' && req.method.toLowerCase() == 'post') {
    // parse a file upload
    var form = new formidable.IncomingForm();

    form.parse(req, function(err, fields, files) {
      res.writeHead(200, {'content-type': 'text/plain'});
      res.write('received upload:\n\n');
      res.end(util.inspect({fields: fields, files: files}));
    });

    return;
  }

  // show a file upload form
  res.writeHead(200, {'content-type': 'text/html'});
  res.end(
    '<form action="/upload" enctype="multipart/form-data" method="post">'+
    '<input type="text" name="title"><br>'+
    '<input type="file" name="upload" multiple="multiple"><br>'+
    '<input type="submit" value="Upload">'+
    '</form>'
  );
}).listen(port);


console.log("Server Running on " + port + ".\nLaunch http://localhost:" + port);</code></pre>
        <pre><code>$ node index.js</code></pre>
        <code>http://localhost:3663</code>
      </section>

      <section>
        <h2>References
        </h2>
        <hr/>
        <ul style="width:90%; word-break: break-all;">
          <li><a href="http://nodejs.org/jsconf.pdf">First Node.js presentation</a>
          </li>
          <li><a href="http://courseware.codeschool.com/node_slides.pdf">Code school</a>
          </li>
          <li><a href="http://kunkle.org/nodejs-explained-pres">Node.js explained</a>
          </li>
          <li><a href="http://www.slideshare.net/oscarrenalias/nodejs-for-architects-openslava-2013">Node.js, for architects - OpenSlava 2013</a>
          </li>
          <li><a href="https://docs.google.com/presentation/d/186gjmM57OWfl0SYobPqSK8IOSUY8LS6-GkBoaBZuLLI/edit#slide=id.p7">Node.Js - Evented I/O</a>
          </li>
          <li><a href="http://www.slideshare.net/tamil3758/node-ppt">How to Node.js?</a>
          </li>
      </section>
      <section>
        <h2>Thanks!
        </h2>
        <hr/>
        <h3>Next up
          <code>Express.js</code>
        </h3>
      </section>

    </div>

  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.min.js"></script>

  <script>
  // Full list of configuration options available here:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,

    theme: 'serif', // available themes are in /css/theme
    transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

    // Parallax scrolling
    // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
    // parallaxBackgroundSize: '2100px 900px',

    // Optional libraries used to extend on reveal.js
    dependencies: [{
      src: 'lib/js/classList.js',
      condition: function() {
        return !document.body.classList;
      }
    }, {
      src: 'plugin/markdown/marked.js',
      condition: function() {
        return !!document.querySelector('[data-markdown]');
      }
    }, {
      src: 'plugin/markdown/markdown.js',
      condition: function() {
        return !!document.querySelector('[data-markdown]');
      }
    }, {
      src: 'plugin/highlight/highlight.js',
      async: true,
      callback: function() {
        hljs.initHighlightingOnLoad();
      }
    }, {
      src: 'plugin/zoom-js/zoom.js',
      async: true,
      condition: function() {
        return !!document.body.classList;
      }
    }, {
      src: 'plugin/notes/notes.js',
      async: true,
      condition: function() {
        return !!document.body.classList;
      }
    }]
  });
  </script>

</body>

</html>
